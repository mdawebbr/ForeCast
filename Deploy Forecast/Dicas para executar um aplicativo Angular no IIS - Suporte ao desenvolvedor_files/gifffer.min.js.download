!function webpackUniversalModuleDefinition(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("Gifffer",[],factory):"object"==typeof exports?exports.Gifffer=factory():root.Gifffer=factory()}(this,(function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var d=document,playSize=60,Gifffer;return function(options){var images,i=0,gifs=[];for(images=d.querySelectorAll("[data-gifffer]");i<images.length;++i)process(images[i],gifs,options);return gifs}}function formatUnit(v){return v+(v.toString().indexOf("%")>0?"":"px")}function parseStyles(styles){var stylesStr="";for(prop in styles)stylesStr+=prop+":"+styles[prop]+";";return stylesStr}function createContainer(w,h,el,altText,opts){var alt,con=d.createElement("BUTTON"),cls=el.getAttribute("class"),id=el.getAttribute("id"),playButtonStyles=opts&&opts.playButtonStyles?parseStyles(opts.playButtonStyles):["width:60px","height:60px","border-radius:30px","background:rgba(0, 0, 0, 0.3)","position:absolute","top:50%","left:50%","margin:-30px"].join(";"),playButtonIconStyles=opts&&opts.playButtonIconStyles?parseStyles(opts.playButtonIconStyles):["width: 0","height: 0","border-top: 14px solid transparent","border-bottom: 14px solid transparent","border-left: 14px solid rgba(255, 255, 255, 0.5)","position: absolute","left: 26px","top: 16px"].join(";");cls&&con.setAttribute("class",el.getAttribute("class")),id&&con.setAttribute("id",el.getAttribute("id")),con.setAttribute("style","position:relative;cursor:pointer;background:none;border:none;padding:0;"),con.setAttribute("aria-label","Gif Image");var play=d.createElement("DIV");play.setAttribute("class","gifffer-play-button"),play.setAttribute("style",playButtonStyles);var trngl=d.createElement("span"),farbicIcon=d.createElement("i");return farbicIcon.setAttribute("class","fabric-icon fabric-icon--Play"),trngl.appendChild(farbicIcon),play.appendChild(trngl),altText&&((alt=d.createElement("p")).setAttribute("class","gifffer-alt"),alt.setAttribute("style","border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px;"),alt.innerText=altText+", image"),con.appendChild(play),el.parentNode.replaceChild(con,el),altText&&con.parentNode.insertBefore(alt,con.nextSibling),{c:con,p:play}}function calculatePercentageDim(el,w,h,wOrig,hOrig){var parentDimW=el.parentNode.offsetWidth,parentDimH=el.parentNode.offsetHeight,ratio=wOrig/hOrig;return w.toString().indexOf("%")>0?h=(w=(w=parseInt(w.toString().replace("%","")))/100*parentDimW)/ratio:h.toString().indexOf("%")>0&&(w=(h=(h=parseInt(h.toString().replace("%","")))/100*parentDimW)*ratio),{w:w,h:h}}function process(el,gifs,options){var url,con,c,w,h,duration,play,gif,playing=!1,cc,isC,durationTimeout,dims,altText;url=el.getAttribute("data-gifffer"),w=el.getAttribute("data-gifffer-width"),h=el.getAttribute("data-gifffer-height"),duration=el.getAttribute("data-gifffer-duration"),altText=el.getAttribute("data-gifffer-alt"),el.style.display="block",c=document.createElement("canvas"),isC=!(!c.getContext||!c.getContext("2d")),w&&h&&isC&&(cc=createContainer(w,h,el,altText,options)),el.onload=function(){isC&&(w=w||el.width,h=h||el.height,cc||(cc=createContainer(w,h,el,altText,options)),con=cc.c,play=cc.p,dims=calculatePercentageDim(con,w,h,el.width,el.height),gifs.push(con),con.addEventListener("click",(function(){clearTimeout(durationTimeout),playing?(playing=!1,con.appendChild(play),con.removeChild(gif),con.appendChild(c),gif=null):(playing=!0,(gif=document.createElement("IMG")).setAttribute("style","width:100%;height:100%;"),gif.setAttribute("data-uri",Math.floor(1e5*Math.random())+1),setTimeout((function(){gif.src=url}),0),con.removeChild(play),con.removeChild(c),con.appendChild(gif),parseInt(duration)>0&&(durationTimeout=setTimeout((function(){playing=!1,con.appendChild(play),con.removeChild(gif),con.appendChild(c),gif=null}),duration)))})),c.width=dims.w,c.height=dims.h,c.getContext("2d").drawImage(el,0,0,dims.w,dims.h),con.appendChild(c),con.setAttribute("style","position:relative;cursor:pointer;width:"+dims.w+"px;height:"+dims.h+"px;background:none;border:none;padding:0;"),c.style.width="100%",c.style.height="100%",w.toString().indexOf("%")>0&&h.toString().indexOf("%")>0?(con.style.width=w,con.style.height=h):w.toString().indexOf("%")>0?(con.style.width=w,con.style.height="inherit"):h.toString().indexOf("%")>0?(con.style.width="inherit",con.style.height=h):(con.style.width=dims.w+"px",con.style.height=dims.h+"px"))},el.src=url}}));